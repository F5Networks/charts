# Values template for f5-bigip-ingress
# Suggested use is to copy, specify values, and pass with `-f` to helm install
ingress:
  namespace: ~
  annotations:
    # required
    virtual-server.f5.com/ip: 172.16.3.59
    # required
    virtual-server.f5.com/partition: f5-bigip-ctlr
    # annotations below are optional
    #  virtual-server.f5.com/balance:
    #  virtual-server.f5.com/http-port:
    #  virtual-server.f5.com/https-port:
    ingress.kubernetes.io/allow-http: false
    ingress.kubernetes.io/ssl-redirect: false
    # Health monitors must be specified as JSON
    # https://github.com/F5Networks/k8s-bigip-ctlr/issues/594
    virtual-server.f5.com/health: |
      [
        {
          "path":     "foo.com/foo",
          "send":     "HTTP GET /",
          "interval": 5,
          "timeout":  10
        },
        {
          "path":     "foo.com/bar",
          "send":     "HTTP GET /",
          "interval": 5,
          "timeout":  10
        },
        {
          "path":     "bar.com/baz",
          "send":     "HTTP GET /",
          "interval": 5,
          "timeout":  10
        }
      ]
  spec:
    tls:
      secretName: /Common/clientssl
    rules:
    - host: foo.com
      http:
        paths:
        - path: /foo
          backend:
            serviceName: svc-1-demo-web-app
            servicePort: 80
        - path: /bar
          backend:
            serviceName: svc-2-demo-web-app
            servicePort: 80
    - host: bar.com
      http:
        paths:
        - path: /baz
          backend:
            serviceName: svc-3-demo-web-app
            servicePort: 80
